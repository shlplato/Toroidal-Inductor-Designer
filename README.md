# Toroidal-Inductor-Designer
 This Matlab toolbox allows the evaluation and design of toroidal inductors.

*********************************************************************************************************
Toroidal Inductor Design Optimization Toolbox
*********************************************************************************************************
This toolbox allows the evaluation of toroidal inductor designs under arbitrary current excitation.
The semi-analytical model couples electromagnetics and heat transfer, and it is analyzed in 
miliseconds. It contains a design function, which allows the multi-objective design optimization 
for a set of design specifications. It produces a set of optimal solutions in a Pareto optimal 
front, where the trade-off between losses and mass is clear for the user. For further information,
please refer to the paper: 
V. C. do Nascimento, S. Moon, K. Byerly, S. D. Sudhoff, and P. R. Ohodnicki, "Multi-objective 
Optimization Paradigm for Toroidal Inductors with Spatially Tuned Permeability," in IEEE 
Transactions on Power Electronics.

As a first example, run an evaluation script such as the example designs:ToroidEvaluateSine.m or 
ToroidEvaluateTrangular.m.
Once you are familiar with the outputs of the evaluation scripts, try post processing one of the provided
example result files in the ToroidPostProcess.m. You may also use the comparison script 
ToroidComparePareto.m to compare the provided example result files.
Finally, you may try a design optimization yourself ToroidDesign.m, which may take a few hours depending on 
the size of the population, and number of generations you select in the Genetic Algorithm optimization.

*********************************************************************************************************
Main Scripts:
1. ToroidDesign.m: Multi-objective optimization of a toroidal inductor (saves a result file);
2. ToroidPostProcess.m: Post-process the design optimization result file generated by ToroidDesign.m.
3. ToroidComparePareto.m: Compares Pareto optimal fronts from different result files.
4. ToroidEvaluateSine.m: Evaluates a standalone design, using a sinusoidal excitation as an example.
5. ToroidEvaluateTrangular.m: Evaluates a standalone design, using a triangular excitation as an example.
*********************************************************************************************************

*********************************************************************************************************
1. ToroidDesign.m:
This design script allows you to optimize a toroidal inductor for a given application. The optimization
minimizes mass and loss for 2 objectives, or mass, volume and loss for 3 objectives. Since mass and volume
are closely linked, minimizing mass and loss usually (2 objectives) usually suffices, and converges faster.
You may change the design specifications that meets your application using the D structure. 
It is recommended that you run the first time with standard parameters, so you observe how the optimization 
evolves. You will note that while no feasible solution has been found, the fitness value will return 
negative values:
Statistics for generation 1
Best fitness = -4.238e-17  -4.238e-17
Mean fitness = -1.3979e-16 -1.3979e-16
Median fitness = -1.5395e-16 -1.5395e-16
Number of evaluations = 1000

The closer the algoorithm is to find a feasible solution, the closer to 0 the best fitness value will be.
When it finds a feasible solution, it will start returning positive fitness values:
Statistics for generation 5
Best fitness = 2.9497    0.063679
Mean fitness = 0.018012  0.00050672
Median fitness = -8.8833e-17 -8.8833e-17
Number of evaluations = 3842

Each fitness value corresponds to the inverse of mass and losses. If it cannot find feasible solutions for 
your set of design parameters, try relaxing the constraints of your problem (also defined in the D 
structure), for instance higher power application might require larger wire gauges, so try increasing the 
maximum allowed strand gauge:
D.dsmx  = 1.024*mm;         % max. strand diameter (AWG 18)
or changing some design features: for instance, in higher power application you may try changing the number 
of parallel strands in the conductor:
D.nspc  = 1;                % # of parallel strands

The number of generations and population size of the Genetic Algorithm based optimization is set by the
variables:
ngen = 1e3;                     % # of generations
npop = 1e3;                     % size of population

The optimization variables and their respective minimum and maximum values are set here:
% gene description---------------------------------------------------------
%
%         min   max chrm  chrm      par
%         val   val type   id         #     description
GAP.gd=[1e0    1e4   3    1;  ...  %  1   # of turns
        1e-9   1e-3  3    1;  ...  %  2   ac*: desired conductor bundle area [m^2]
        1e-2   0.1   3    1;  ...  %  3   ra*: desired toroidal core inner air radius [m]
        5e-3   0.1   3    1;  ...  %  4   lc: toroidal core axial length [m]
        1e-3   0.1   3    1;  ...  %  5   dc: toroidal core radial depth [m]
        1*D.nfmu    100/D.mp.mur*D.nfmu   3*D.nfmu  1*D.nfmu]; %  6~6+D.ns   f(mu)

The material of interest can be selected from a CoreMaterialCatalog(material index, frequency core losses)
D.mp = CoreMaterialCatalog(1,D.fcl);% store material properties in parameters struct
Core materials and their properties can be added to the core material catalog at the user's discretion.
In the material catalog, pertinent to the paper herein referred, the nanocomposite ribbon that can be 
strain annealed, and have its permeability tuned is material #1. If no permeability tuning is desired, 
the number of multipliers should be set to 1, and the range of that 1 multiplier should be from 1 to 1:
n = 1;                      % # of permeability function multipliers:
                            % 1: constant permeability across the radius
                            % 2: affine permeability function
                            % 3: quadratic permeability function
                            % 4: cubic permeability function
                            % 5 or more: piecewise cubic hermite
                            %            permeability function
D.nfmu = ones(n,1);         % array defining order of permeability tuning
% gene description---------------------------------------------------------
%
%         min   max chrm  chrm      par
%         val   val type   id         #     description
GAP.gd=[1e0    1e4   3    1;  ...  %  1   # of turns
        1e-9   1e-3  3    1;  ...  %  2   ac*: desired conductor bundle area [m^2]
        1e-2   0.1   3    1;  ...  %  3   ra*: desired toroidal core inner air radius [m]
        5e-3   0.1   3    1;  ...  %  4   lc: toroidal core axial length [m]
        1e-3   0.1   3    1;  ...  %  5   dc: toroidal core radial depth [m]
        1*D.nfmu    1*D.nfmu   3*D.nfmu  1*D.nfmu]; %  6~6+D.ns   f(mu)

After the optimization finishes, a file is saved in the toobox root folder. This results file can be post
processed with the ToroidPostProcess.m, and multiple files can be compared using ToroidComparePareto.m.

*********************************************************************************************************
2. ToroidPostProcess.m:
This script post processes a result file generated by the script ToroidDesign.m.
Figure 100 shows the distribution of all optimization variables, for each design in the Pareto optimal 
front.
Besides general Plots for all Pareto solutions, a particular design can be analyzed. That design can be
selected based on the target mass in:
mass_target = 0.2255;       % target mass in the Pareto optimal front [kg]
If the lightest design is of interest, set mass_target to 0.
*********************************************************************************************************

*********************************************************************************************************
3. ToroidComparePareto.m:
This script allows the comparison of Pareto optimal fronts from multiple design files.
*********************************************************************************************************

*********************************************************************************************************
4. ToroidEvaluateSine.m:
This script is an example that calls the evaluation function for a specific design. The example has a 
sinusoidal current excitation. 
*********************************************************************************************************

*********************************************************************************************************
5. ToroidEvaluateTrangular.m: 
This script is an example that calls the evaluation function for a specific design. The example has a 
triangular current excitation. 
*********************************************************************************************************